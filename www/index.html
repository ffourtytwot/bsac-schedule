<!-- index.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSAC Schedule</title>

    <script>
        (function() {
            try {
                const settings = localStorage.getItem('bsac_settings');
                if (settings) {
                    const parsed = JSON.parse(settings);
                    if (parsed.theme === 'dark') {
                        document.body.classList.add('dark-theme');
                    }
                }
            } catch (e) {}
        })();
    </script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-left">
            <img src="logo.png" alt="Logo" class="logo" id="secretLogo">
            <h1 id="uiTitle" data-i18n="title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ë–ì–ê–°</h1>
            <span id="adminBadge" class="hidden">üëë ADMIN</span>
        </div>

        <div class="controls-area">
            <div class="settings-btns">
                <button id="themeBtn" class="icon-btn">üåô</button>
                <button id="langBtn" class="text-btn">BE</button>
            </div>
            
            <div class="group-selector">
                <!-- –í–´–ë–ê–† –ö–£–†–°–ê (–ù–û–í–ê–ï) -->
                <label for="courseSelect" data-i18n="lblCourse">–ö—É—Ä—Å:</label>
                <select id="courseSelect">
                    <option value="1">1 –ö—É—Ä—Å</option>
                    <option value="2">2 –ö—É—Ä—Å</option>
                    <option value="3">3 –ö—É—Ä—Å</option>
                    <option value="4">4 –ö—É—Ä—Å</option>
                    <!-- –ú–æ–∂–Ω–∞ –¥–∞–¥–∞—Ü—å –ú–∞–≥—ñ—Å—Ç—Ä–∞—Ç—É—Ä—É —Ü—ñ –ó–∞–≤–æ—á–∫—É -->
                </select>

                <!-- –í–´–ë–ê–† –ì–†–£–ü–´ (–î—ã–Ω–∞–º—ñ—á–Ω—ã) -->
                <label for="groupSelect" id="uiLabel" data-i18n="selectLabel">–ì—Ä—É–ø–ø–∞:</label>
                <select id="groupSelect">
                    <option value="" disabled selected id="uiSelectDefault" data-i18n="selectDefault">-- –ì—Ä—É–ø–ø–∞ --</option>
                    <!-- –û–ø—Ü—ã—ñ –±—É–¥—É—Ü—å –∑–∞–ø–∞—û–Ω—è—Ü—Ü–∞ –ø—Ä–∞–∑ JS -->
                </select>

                <!-- –í–´–ë–ê–† –ü–ê–î–ì–†–£–ü–´ -->
                <label for="subgroupSelect" data-i18n="lblSubgroup">–ü–æ–¥–≥—Ä—É–ø–ø–∞:</label>
                <select id="subgroupSelect">
                    <option value="0" data-i18n="subgroupAll">–í—Å–µ</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
            </div>

            <!-- –£ Header –¥–∞–¥–∞–µ–º —ñ–Ω—Ñ–∞—Ä–º–∞—Ü—ã—é –ø—Ä–∞ —Ç—ã–¥–∑–µ–Ω—å -->
            <div class="week-info" style="width: 100%; text-align: center; font-size: 0.9rem; color: var(--accent-warn); margin-top: 5px;">
                üìÖ <span id="currentWeekDisplay">–¢—ã–¥–∑–µ–Ω—å: ...</span>
            </div>
        </div>
    </header>

    <main id="scheduleContainer">
        <!-- –Ü–Ω–¥—ã–∫–∞—Ç–∞—Ä –∞—Ñ–ª–∞–π–Ω —Ä—ç–∂—ã–º—É (–ù–û–í–ê–ï) -->
        <div id="offlineBadge" class="hidden" style="text-align:center; color: var(--accent-danger); font-weight:bold; margin-bottom:10px;">
            ‚ö†Ô∏è OFFLINE MODE
        </div>

        <div class="placeholder" id="uiPlaceholder" data-i18n="placeholder">
            –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
    </main>

    <!-- –ê–ö–ù–û –£–í–ê–•–û–î–£ -->
    <div id="adminModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-btn" id="closeLoginModal">&times;</span>
            <h2 data-i18n="modalTitle">–£–≤–∞—Ö–æ–¥</h2>
            <p data-i18n="modalDesc">GitHub Token</p>
            <form id="loginForm">
                <input type="password" id="apiTokenInput" placeholder="ghp_..." required autocomplete="off">
                <p class="hint" data-i18n="modalHint">–¢–æ–∫–µ–Ω –∑–∞—Ö–æ—û–≤–∞–µ—Ü—Ü–∞ –ª–∞–∫–∞–ª—å–Ω–∞.</p>
                <button type="submit" class="login-btn" data-i18n="btnLogin">–£–≤–∞–π—Å—Ü—ñ</button>
            </form>
            <div id="loginMessage"></div>
        </div>
    </div>

    <!-- –ê–ö–ù–û –í–´–•–ê–î–£ -->
    <div id="logoutModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-btn" id="closeLogoutModal">&times;</span>
            <h2 data-i18n="logoutTitle">–ê–¥–º—ñ–Ω–∫–∞</h2>
            <p data-i18n="logoutDesc">–í—ã–π—Å—Ü—ñ?</p>
            <button id="logoutBtn" class="login-btn" data-i18n="btnLogout">–í—ã–π—Å—Ü—ñ</button>
        </div>
    </div>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker: Registered'))
                    .catch(err => console.log('Service Worker: Error', err));
            });
        }
    </script>

    <!-- Firebase SDK (–í—ã–∫–∞—Ä—ã—Å—Ç–æ—û–≤–∞–µ–º –≤–µ—Ä—Å—ñ—é compat –¥–ª—è –ø—Ä–∞—Å—Ç–∞—Ç—ã) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-messaging-compat.js"></script>
    
    <script src="script.js"></script>
    <script src="cordova.js"></script>
</body>
</html>